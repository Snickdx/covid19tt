function convertToLineData(t){let e=[],a=[],o=[],s=[],i=[],n={},r=0;for(let d of t)d.date in n?(a[r-1]=d.tested,o[r-1]=d.cases.imported,s[r-1]=d.cases.deaths,i[r-1]=d.cases.community):(e.push(`Day ${r}`),a.push(d.tested),o.push(d.cases.imported),s.push(d.cases.deaths),i.push(d.cases.community),n[d.date]=!0,r++);return{categories:e,imported:o,deaths:s,tested:a,community:i}}function displayLineChart(t){let{categories:e,tested:a,imported:o,community:s}=convertToLineData(t),i={fontFamily:"monospace",color:"white",fontSize:"15px"};Highcharts.chart("linechart",{chart:{type:"line",backgroundColor:"transparent",scrollablePlotArea:{minWidth:600,scrollPositionX:0}},title:{text:"Cases Since 11th March 2020",style:i},subtitle:{text:"Source: MoH Facebook Page",style:i},xAxis:{categories:e,labels:{style:i}},yAxis:{title:{text:"Total Cases",style:{color:"white",fontSize:"10px"}},labels:{enabled:!1}},plotOptions:{line:{dataLabels:{enabled:!0,style:{fontFamily:"monospace",color:"white"}},enableMouseTracking:!0}},legend:{itemStyle:{color:"white"}},series:[{name:"Confirmed Imported",data:o,label:{enabled:!1}},{name:"Tested",data:a,label:{enabled:!1}},{name:"Community",data:s,label:{enabled:!1}}],responsive:{rules:[{condition:{maxWidth:"800px"},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})}function displayPieChart({cases:t}){let e=[{name:"Imported",y:t.imported},{name:"Community",y:t.community}];Highcharts.chart("piechart",{chart:{plotBackgroundColor:"transparent",backgroundColor:"transparent",plotBorderWidth:null,plotShadow:!1,type:"pie",zoomType:"xy"},title:{text:"Imported Vs Community Cases",style:{fontFamily:"monospace",color:"white",fontSize:"15px"}},tooltip:{pointFormat:"<b>{point.y} persons tested positive are {point.name}</b>"},accessibility:{point:{valueSuffix:"%"}},legend:{itemStyle:{color:"white"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{name:"Cases",colorByPoint:!0,data:e}]})}function getReportHistory(){return data=[{date:1583884800,"update-num":14,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3195048907191562/?type=3&theater",cases:{deaths:0,imported:0,community:0},tested:40},{date:1583971200,"update-num":18,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3198283573534762/?type=3&theater",cases:{deaths:0,imported:1,community:0},tested:52},{date:1584057600,"update-num":20,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3200040596692393/?type=3&theater",cases:{deaths:0,imported:1,community:0},tested:63},{date:1584144e3,"update-num":22,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3202589956437457/?type=3&theater",cases:{deaths:0,imported:2,community:0},tested:63},{date:1584230400,"update-num":23,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3204012812961838/?type=3&theater",cases:{deaths:0,imported:2,community:0},tested:77},{date:1584230400,"update-num":24,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3204612326235220/?type=3&theater",cases:{deaths:0,imported:2,community:0},tested:81},{date:1584230400,"update-num":25,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3205152302847889/?type=3&theater",cases:{deaths:0,imported:4,community:0},tested:81},{date:1584316800,"update-num":27,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3207001969329589/?type=3&theater",cases:{deaths:0,imported:4,community:0},tested:84},{date:1584316800,"update-num":28,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3207431949286591/?type=3&theater",cases:{deaths:0,imported:5,community:0},tested:84},{date:1584403200,"update-num":29,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3209075915788861/?type=3&theater",cases:{deaths:0,imported:5,community:0},tested:96},{date:1584403200,"update-num":30,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3209290455767407/?type=3&theater",cases:{deaths:0,imported:5,community:0},tested:110},{date:1584403200,"update-num":31,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3210026749027111/?type=3&theater",cases:{deaths:0,imported:7,community:0},tested:110},{date:1584489600,"update-num":32,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3211149152248204/?type=3&theater",cases:{deaths:0,imported:7,community:0},tested:131},{date:1584489600,"update-num":34,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3212515568778229/?type=3&theater",cases:{deaths:0,imported:9,community:0},tested:131},{date:1584576e3,"update-num":35,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3213683695328083/?type=3&theater",cases:{deaths:0,imported:9,community:0},tested:150},{date:1584576e3,"update-num":36,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3214183925278060/?type=3&theater",cases:{deaths:0,imported:9,community:0},tested:155},{date:1584662400,"update-num":37,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3215879055108547/?type=3&theater",cases:{deaths:0,imported:9,community:0},tested:250},{date:1584662400,"update-num":38,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3216553595041093/?type=3&theater",cases:{deaths:0,imported:9,community:0},tested:258},{date:1584748800,"update-num":40,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3219022014794251/?type=3&theater",cases:{deaths:0,imported:49,community:0},tested:284},{date:1584835200,"update-num":41,url:"https://www.facebook.com/MinistryofHealthTT/photos/a.153051404724676/3220704667959319/?type=3&theater",cases:{deaths:0,imported:50,community:0},tested:298}]}function registerSW(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})}function displayLastRecord(t){document.querySelector("#cases").innerHTML=t.cases.imported+t.cases.community,document.querySelector("#date").innerHTML=new Date(1e3*t.date).toLocaleDateString("en-US"),document.querySelector("#update-num").innerHTML=t["update-num"]}function displayMedia(t){let e="";for(let a of t)e+=`\n        <div class="card">\n            <div class="card-content black-text">\n                <span class="card-title">Update #: ${a["update-num"]}</span>\n                <p>Date: ${new Date(1e3*a.date).toLocaleDateString("en-US")}</p>\n                <p>Tested: ${a.tested}</p>\n                <p>Imported Cases: ${a.cases.imported}</p>\n                <p>Community Cases: ${a.cases.community}</p>\n            </div>\n            <div class="card-action">\n            <a href="${a.url}" rel="noopener" target="_blank" class="red-text">View on Facebook</a>\n            </div>\n        </div>\n        `;document.querySelector("#media").innerHTML=e}function main(){M.Tabs.init(document.querySelector(".tabs"));let t=getReportHistory();displayLineChart(t);let e=t.reverse()[0];displayPieChart(e),displayLastRecord(e),displayMedia(t),registerSW()}window.addEventListener("load",main);